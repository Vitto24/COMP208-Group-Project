{% extends 'base.html' %}

{% block title %}Timetable — Uni Tracker{% endblock %}
{% block nav_timetable %}active{% endblock %}
{% block page_title %}Timetable{% endblock %}

{% block content %}

<!-- Today's events summary -->
<div class="section">
    <h2>Today — {{ today_name }}</h2>
    {% if today_entries %}
        {% for entry in today_entries %}
        <div class="deadline-row">
            <strong>{{ entry.start_time|time:"H:i" }} – {{ entry.end_time|time:"H:i" }}</strong>
            &nbsp; {{ entry.module.code }} {{ entry.event_type }}
            {% if entry.room %} · {{ entry.room }}{% endif %}
        </div>
        {% endfor %}
    {% else %}
        <p>No events today.</p>
    {% endif %}
</div>

<!-- Weekly timetable grid -->
<div class="section">
    <h2>Semester {{ semester }}</h2>
    <table class="data-table">
        <thead>
            <tr>
                <th>Time</th>
                <th>Mon</th>
                <th>Tue</th>
                <th>Wed</th>
                <th>Thu</th>
                <th>Fri</th>
            </tr>
        </thead>
        <tbody>
            {% for time, day_entries in rows %}
            <tr>
                <td><strong>{{ time }}</strong></td>
                <td>{% for e in day_entries.MON %}{{ e.module.code }}<br><small>{{ e.event_type }}</small>{% if not forloop.last %}<hr>{% endif %}{% endfor %}</td>
                <td>{% for e in day_entries.TUE %}{{ e.module.code }}<br><small>{{ e.event_type }}</small>{% if not forloop.last %}<hr>{% endif %}{% endfor %}</td>
                <td>{% for e in day_entries.WED %}{{ e.module.code }}<br><small>{{ e.event_type }}</small>{% if not forloop.last %}<hr>{% endif %}{% endfor %}</td>
                <td>{% for e in day_entries.THU %}{{ e.module.code }}<br><small>{{ e.event_type }}</small>{% if not forloop.last %}<hr>{% endif %}{% endfor %}</td>
                <td>{% for e in day_entries.FRI %}{{ e.module.code }}<br><small>{{ e.event_type }}</small>{% if not forloop.last %}<hr>{% endif %}{% endfor %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
